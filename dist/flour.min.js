var flour=flour||{};flour.instanceId=1,flour.app=function(e,r){if(!(this instanceof flour.app))return new flour.app(name,r);var t=this;r=r||{};var i=[],n=void 0===r.cache_views_count?5:r.cache_views_count,o=0,l=void 0,u=void 0,s=void 0;t.el=$('<div class="flour-app"></div>'),t.el.on("click","a",function(e){if(1!==e.button&&!e.metaKey){if($target=$(e.currentTarget),$target.hasClass("classic")||$target.hasClass("ignore"))return void e.stopPropagation();e.preventDefault();var r=$target.attr("href");if(void 0!==r){var t=!1;$target.hasClass("silent")&&(t=!0);var i={silent:t};flour.pushState(r,i)}}}),t.displayView=function(e,r){if(e.ready===!1){var i=function(){t.transitionViews(e,r),e.ready=!0,e.off("ready",i)};e.on("ready",i)}else t.transitionViews(e,r)},t.transitionViews=function(e,i){void 0!==e.willShow&&e.willShow(),r.transition?r.transition(e,i,function(){t.cleanUp(e,i)}):(t.el.append(e.el),t.cleanUp(e,i))},t.cleanUp=function(e,r){if(r&&r.el.detach(),i.length>n){var t=i.shift();t.destroy(),t.el.remove(),o--}};var a=new flour.router(r.routes,r.base_path);flour.subscribe("route:change",function(e){var r=void 0;if(void 0!==flour.views[e.view]){var n=e.route!==l,a=e.view!==u,f=JSON.stringify(e.params)!==JSON.stringify(s);if(n||a||f){var v,c=i[o];if(!a&&c.routeUpdate){var d=c.routeUpdate(e);if(s=e.params,l=e.route,d!==!1)return}c&&c.willHide&&(r=c.willHide(e.view)),"back"===e.direction?(c=i.pop(),c.destroy(),o--,void 0!==i[o]?v=i[o]:(v=flour.getView(e.view,e.params,r),i.push(v))):(v=flour.getView(e.view,e.params,r),i.push(v)),o=i.length-1,t.displayView(v,c),l=e.route,u=e.view,s=e.params}e.action&&void 0!==t.view[e.action]&&t.view[e.action](e.params)}else flour.error('View "'+e.view+'" does not exist.')}),flour.defer(function(){a.matchCurrentRequest()})};var flour=flour||{};flour.bind={},flour.bind.binders={},flour.bind.binderNames=[],flour.bind.query="",flour.bind.prefix="flour",flour.addBinder=function(e,r){flour.bind.binders[flour.bind.prefix+"-"+e]=r,flour.bind.binderNames.push("["+flour.bind.prefix+"-"+e+"]"),flour.bind.query=flour.bind.binderNames.join(",")},flour.bindView=function(e){var r=[],t=[],i=(flour.bind.prefix,function(r,i,n){var o=!1,l=!1,u=void 0,s=!1,a=!1,f=void 0,v=!0,c=!1,d=!1,p=function(e){i.update(r,e)};if(void 0!==i.attach&&i.attach(r,n,e),n=n.replace(/\s/g,""),o=-1===n.indexOf("|")?!1:!0,s=-1===n.indexOf("=")?!1:!0,a=-1===n.indexOf("?")?!1:!0,o){var h=n.split("|");if(n=h[0],l=h[1],-1!==l.indexOf(":")){var h=l.split(":");l=h[0],u=h[1];var g=u.length-1;"'"!==u[0]&&'"'!==u[0]||"'"!==u[g]&&'"'!==u[g]||(u=u.substring(1,g))}p=function(t){void 0!==flour.filters[l]?t=flour.filters[l](t,u):void 0!==e[l]&&(t=e[l](t,u)),i.update(r,t)}}if(s||a)if(s){var h=n.split("=");if(n=h[0],f=h[1],a){var h=f.split("?"),b=h[1].split(":");f=h[0],v=b[0],c=void 0===b[1]?!1:b[1],"true"===v&&(v=!0),"false"===c&&(c=!1)}p=function(e){e=e==f?v:c,i.update(r,e)}}else{var h=n.split("?"),b=h[1].split(":");n=h[0],v=b[0],c=void 0===b[1]?!1:b[1],"true"===v&&(v=!0),"false"===c&&(c=!1),p=function(e){e=e?v:c,i.update(r,e)}}if(d="model."+n+":change",i.update){t.push({eventName:d,eventCallback:p}),e.on(d,p);var m=e.get(n);p(m)}});e.on("render",function(){for(var n=0,o=t.length;o>n;n++){var l=t[n];e.off(l.eventName,l.eventCallback)}r.length=0,r=e.find(flour.bind.query),r.each(function(e,r){var t=$(r);for(var n in flour.bind.binders){var o=t.attr(n);void 0!==o&&i(t,flour.bind.binders[n],o)}})})};var flour=flour||{};flour.addBinder("html",{update:function(e,r){e.html(r)}}),flour.addBinder("text",{update:function(e,r){e.text(r)}}),flour.addBinder("value",{attach:function(e,r,t){var i=e[0].nodeName;if("INPUT"===i||"TEXTAREA"===i){var n=e[0].type;"checkbox"===n?e.on("change",function(){var i=e.prop("checked");t.set(r,i,!1)}):"radio"===n?e.on("change",function(){var i=e.val();t.set(r,i,!1)}):e.on("keypress change keyup",function(){var i=e.val();t.set(r,i,!1)})}"SELECT"===i&&e.on("change",function(){var i=e.val();t.set(r,i,!1)})},update:function(e,r){var t=(e[0].nodeName,e[0].type);"checkbox"===t?e.prop("checked",r):"radio"===e.attr("type")?e.val()===r&&e.prop("checked",!0):e.val()!==r&&e.val(r)}}),flour.addBinder("show",{update:function(e,r){r?e.css("display","block"):e.css("display","none")}}),flour.addBinder("show-inline",{update:function(e,r){r?e.css("display","inline"):e.css("display","none")}}),flour.addBinder("hide",{update:function(e,r){r?e.css("display","none"):e.css("display","block")}}),flour.addBinder("class",{update:function(e,r){var t=e.data("last-class");t&&e.removeClass(t),e.data("last-class",r),e.addClass(r)}}),flour.addBinder("view",{attach:function(e,r,t){t[r]&&e.append(t[r].el)}}),flour.addBinder("name",{attach:function(e,r,t){t[r]=null,t[r]=e}});var flour=flour||{};flour.filters={},flour.addFilter=function(e,r){flour.filters[e]=r};var flour=flour||{};flour.addFilter("json_format",function(e,r){var t=void 0===r?2:parseInt(r);return JSON.stringify(e,void 0,t)}),Handlebars.registerHelper("link_to",function(e){return flour.config("base_url")+"/"+e}),Handlebars.registerHelper("render_template",function(e,r){return flour.getTemplate(e)({data:r})});var flour=flour||{};flour.helpers={},flour.addHelper=function(e,r){flour.helpers[e]=r},flour.getHelper=function(e){return flour.isFunction(flour.helpers[e])&&(flour.helpers[e]=new flour.helpers[e]),flour.helpers[e]};var flour=flour||{};flour.requestHandler=function(e,r,t){t[r]&&t[r](e)},flour.requestPreProcessor=function(e){return e},flour.request={get:function(e,r,t){return this.doRequest(e,r,t,"get")},put:function(e,r,t){return this.doRequest(e,r,t,"put")},post:function(e,r,t){return this.doRequest(e,r,t,"post")},"delete":function(e,r,t){return this.doRequest(e,r,t,"delete")},doRequest:function(e,r,t,i){return t.silent!==!0&&flour.publish("http-request:start"),r=flour.requestPreProcessor(r,i),$.ajax({url:e,type:i,data:r,success:function(e,r){t.silent!==!0&&flour.publish("http-request:end"),flour.requestHandler(e,r,t)}})}},flour.http=function(e,r,t){void 0===r&&(r="get");var i=function(e,r){if(void 0!==e)for(var t in e)if(-1!==r.indexOf(":"+t)){var i=":"+t;r=r.replace(i,e[t]),delete e[t]}return r};return function(n,o){var n=flour.clone(n),l=i(n,e);n=flour.requestPreProcessor(n,r),o.silent!==!0&&flour.publish("http-request:start");var u={url:l,type:r,data:n,success:function(e,r){o.silent!==!0&&flour.publish("http-request:end"),flour.requestHandler(e,r,o)}};if(void 0!==t)for(var s in t)u[s]=t[s];return $.ajax(u)}};var flour=flour||{};flour.lists={},flour.addList=function(e,r){r.prototype=new flour.baseList,flour.lists[e]=r},flour.getList=function(e,r){var t=new flour.lists[e];return t.eventListeners={},t.subscriptions=[],t.lookup={},t.views=[],t.list=[],t.raw=[],t.el=null,t.id=flour.instanceId,flour.instanceId++,flour.publish("flour:list_create",{name:e,list:t}),t.initialize(r),t},flour.baseList=function(){var e=this;e.initialize=function(e){var r=this;r.key=r.key?r.key:!1,r.events=r.events?r.events:{},r.itemElClass=r.itemElClass?r.itemElClass:"",r.itemElType=r.itemElType?r.itemElType:"div",r.wrapElType=r.wrapElType?r.wrapElType:"div",r.el=$("<"+r.wrapElType+' class="flour-list"></'+r.wrapElType+">"),r.addHelpers(),r.addEvents(),r.init(e)},e.generateLookup=function(){var e=this;if(e.raw.length=0,e.lookup={},!e.key){for(var r=0,t=e.list.length;t>r;r++){var i=e.list[r].data;e.raw.push(i)}return void e.trigger("change",e.raw)}for(var r=0,t=e.list.length;t>r;r++){var i=e.list[r].data;e.raw.push(i),e.lookup[i[e.key]]=r}e.trigger("change",e.raw)},e.getItem=function(e){var r=this;return r.list[r.getItemIndex(e)]},e.getItemIndex=function(e){var r=this;return r.key?r.lookup[e]:e},e.addEvents=function(){var e=this;if(void 0!==e.events)for(var r in e.events)!function(){var t=e.events[r],i=r.split(" "),n=i.pop(),o=i.join(" ");void 0!==e[t]?e.el.on(o,n,function(r){var i=$(r.currentTarget);e[t](r,i)}):flour.isFunction(t)&&e.el.on(o,n,function(e){var r=$(e.currentTarget);t(e,r)})}()},e.addHelpers=function(){var e=this;if(void 0!==e.helpers)for(var r=0,t=e.helpers.length;t>r;r++){var i=e.helpers[r];e[i]=flour.getHelper(i),void 0!==e[i].init&&e[i].init(e)}},e.find=function(e){var r=this;return r.el.find(e)},e.add=function(e,r){var t=this,i=function(e){if(void 0===t.lookup[e[t.key]]){void 0===r?e.index=t.list.length:r>t.list.length?(r=void 0,e.index=t.list.length):e.index=r;var i=$("<"+t.itemElType+">");i.attr("class",t.itemElClass);var n={data:e,el:i};if(t.renderItem(n),void 0===r)t.list.push(n),t.el.append(i);else if(r>0){var e=t.list[r-1];t.list.splice(r,0,n),e.el.after(i)}else t.list.splice(0,0,n),t.el.prepend(i)}};if(flour.isArray(e))for(var n=0,o=e.length;o>n;n++)i(e[n]),void 0!==r&&r++;else i(e);return t.generateLookup(),void 0===r?t.list.length:r},e.remove=function(e){var r=this,e=r.getItemIndex(e),t=r.list[e];return t?(t.el.remove(),t.data=null,r.list.splice(e,1),r.generateLookup(),e):!1},e.removeAll=function(){for(var e=this,r=0,t=e.list.length;t>r;r++){var i=e.list[r];i.el.remove(),i.data=null}e.list.length=0,e.generateLookup()},e.move=function(e,r){var t=this,i=t.getItem(e),n=t.getItemIndex(e),o=n>r?"up":"down";if(r>t.list.length&&(r=t.list.length),r>0){var l="up"===o?t.list[r-1]:t.list[r];l.el.after(i.el)}else t.el.prepend(i.el);t.list.splice(r,0,t.list.splice(n,1)[0]),t.generateLookup()},e.set=function(e,r,t,i){var n=this,o=n.getItem(e);n.setItem(o,r,t,i)},e.setItem=function(e,r,t,i){{var n=this,o=e.data,i=void 0===i?!0:i;flour.setObjectKeyValue(o,r,t)}i&&"index"!==r&&n.key&&n.renderItem(e),n.trigger("change",n.raw)},e.get=function(e,r){var t=this,i=t.getItem(e);return flour.getObjectKeyValue(i.data,r)},e.renderItem=function(e){var r=this;e.el.html(flour.getTemplate(r.template)(e.data))},e.on=function(e,r){var t=this;void 0===t.eventListeners[e]&&(t.eventListeners[e]=[]),t.eventListeners[e].push(r)},e.off=function(e,r){var t=this,i=t.eventListeners[e];if(void 0!==i)if(void 0!==r){for(var n=0,o=i.length;o>n;n++)if(r===i[n]){i[n]=null;break}}else i.length=0},e.trigger=function(e,r){var t=this,i=t.eventListeners[e];if(void 0!==i&&null!==i)for(var n=0,o=i.length;o>n;n++){var l=i[n];null!==l&&void 0!==l&&l(r)}},e.subscribe=function(e,r){{var t=this;flour.subscribe(e,r)}t.subscriptions.push({eventName:e,callback:r})},e.getView=function(e,r){var t=this,i=flour.getView(e,r);return t.views.push(i),i},e.getList=function(e,r){var t=this,i=flour.getList(e,r);return t.views.push(i),i},e.destroy=function(){var e=this;e.trigger("destroy"),e.el.off();for(var r=0,t=e.subscriptions.length;t>r;r++){var i=e.subscriptions[r];flour.unsubscribe(i.eventName,i.callback)}for(var r=0,t=e.views.length;t>r;r++){var n=e.views[r];n.destroy()}for(var o in e.eventListeners)e.eventListeners[o]=null;void 0!==e.postDestroy&&e.postDestroy(),flour.publish("flour:list_destroy",e.id)}};var flour=flour||{};flour.log=function(e,r){void 0!==flour.logView&&flour.logView.log(e,r)};var flour=flour||{};flour.subscriptions={},flour.publish=function(e,r){var t=flour.subscriptions[e];if(void 0!==t)for(var i=0,n=t.length;n>i;i++)t[i]&&t[i](r)},flour.subscribe=function(e,r){void 0===flour.subscriptions[e]&&(flour.subscriptions[e]=[]),flour.subscriptions[e].push(r)},flour.unsubscribe=function(e,r){if(void 0!==flour.subscriptions[e])for(var t=0,i=flour.subscriptions[e].length;i>t;t++)r===flour.subscriptions[e][t]&&flour.subscriptions[e].splice(t,1)};var flour=flour||{};flour.router=function(e,r){if(!(this instanceof flour.router))return new flour.router(name,options);r=r||"";var t=this,i=[];flour.subscribe("history:state_change",function(e){t.matchCurrentRequest(e)}),window.addEventListener("popstate",function(){flour.publish("history:state_change",{popstate:!0})}),t.matchCurrentRequest=function(e){e=void 0===e?{}:e;var n=!1,o={},l=[],u=!1,s=!0;flour.isObject(e)&&e.silent===!0&&(s=!1),requestURL=document.URL,originalRequestURL=requestURL,-1!==requestURL.indexOf("#")?(n=requestURL.split("#"),u=n[1],requestURL=n[0]):window.location.hash&&(u=window.location.hash.replace("#","")),-1!==requestURL.indexOf("?")&&(n=requestURL.split("?"),o={},l=n[1].split("&"),requestURL=n[0]);var a=requestURL.replace(flour.config("base_url")+r,""),f=t.match(a),v="forward";f.requestURL=originalRequestURL.replace(flour.config("base_url")+r,""),f.hash=u;var c=i.length-2;if(e.popstate&&f.requestURL===i[c]?(i.pop(),v="back"):i.push(f.requestURL),f.direction=v,l)for(var c=0,d=l.length;d>c;c++){var p=l[c].split("=");f.params[p[0]]=p[1]}flour.store.set("route",f,s)},t.match=function(r){var i={};for(var n in e){var o=n,l=e[n],u=new RegExp("^"+t.getRegex(o)+"$","i");if(u.test(r)){for(var s=o.split("/"),a=r.split("/"),f="",n=0;n<s.length;n++)(f=s[n].match(/:([\w-]+)/))&&(i[f[1]]=a[n]);return l.route=o,l.params=i,l}}return!1},t.getRegex=function(e){return e.replace(/:(\w+)/g,"([\\w-=%.]+)")}};var flour=flour||{};flour.store={values:{},set:function(e,r,t){var i=this,n=flour.setObjectKeyValue(i.values,e,r);if(t!==!1){var o=n[0],l=i.values[o];flour.publish(o+":change",l)}flour.publish("flour:store_update",i.values)},get:function(e){var r=this;if(!e)return r.values;var t=flour.getObjectKeyValue(r.values,e);return flour.clone(t)}};var flour=flour||{};flour.templates={},flour.addTemplate=function(e,r){flour.templates[e]=Handlebars.compile(r)},flour.getTemplate=function(e){return void 0!==e&&void 0!==flour.templates[e]?flour.templates[e]:(void 0===flour.templates["flour:missing_template"]&&flour.addTemplate("flour:missing_template","<div>Missing template.</div>"),flour.templates["flour:missing_template"])};var flour=flour||{};flour.pushState=function(e,r,t){t=void 0===t?flour.config("title"):t,r=void 0===r?{}:r,history.pushState(r,t,e),flour.publish("history:state_change",r)},flour.isObject=function(e){return"object"==typeof e&&null!==e?!0:!1},flour.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)?!0:!1},flour.isFunction=function(e){var r={};return e&&"[object Function]"===r.toString.call(e)},flour.isString=function(e){return"string"==typeof e||e instanceof String?!0:!1},flour.clone=function(e){var r;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return r=new Date,r.setTime(e.getTime()),r;if(e instanceof Array){r=[];for(var t=0,i=e.length;i>t;t++)r[t]=flour.clone(e[t]);return r}if(e instanceof Object){r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=flour.clone(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},flour.pluralize=function(e,r){return 1===r?e:e+"s"},flour.rgb2hex=function(e){function r(e){return("0"+parseInt(e).toString(16)).slice(-2)}return/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+r(e[1])+r(e[2])+r(e[3]))},flour.readableBytes=function(e){if(e=parseInt(e),0===e)return 0;var r=["bytes","kB","MB","GB","TB","PB"],t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(t))).toFixed(2)+" "+r[t]},flour.truncate=function(e,r){if(e&&e.length>r&&e.length>0){var t=e+" ";return t=e.substr(0,r),t=e.substr(0,t.lastIndexOf(" ")),t=t.length>0?t:e.substr(0,r)}return e},flour.defer=function(e){setTimeout(e,0)},flour.setObjectKeyValue=function(e,r,t){if(e&&r){var i=-1===r.indexOf(".")?!1:!0,n=-1===r.indexOf("[")?!1:!0;if(n||i){r=r.replace(/\]|'|"/g,"");for(var o=r.split(/\.|\[/g),l=e,u=o.length,s=u-1,a=0;u>a;a++){var f=o[a];a===s?l[f]=t:(l[f]||(l[f]={}),l=l[f])}return o}return e[r]=t,[r]}},flour.getObjectKeyValue=function(e,r){if(e&&r){var t=-1===r.indexOf(".")?!1:!0,i=-1===r.indexOf("[")?!1:!0;if(!i&&!t)return e[r];r=r.replace(/\]|'|"/g,"");for(var n=r.split(/\.|\[/g),o=e,l=n.length,u=l-1,s=0;l>s;s++){var a=n[s];if(s===u)return o[a];if(!o[a])return void 0;o=o[a]}}},flour.configValues={},flour.config=function(e,r){if(void 0===e)return flour.configValues;if(flour.isObject(e))for(var t in e)flour.configValues[t]=e[t];else{if(void 0===r)return flour.configValues[e];flour.configValues[e]=r}},flour.generateLookup=function(e,r){if(flour.isArray(e)){for(var t={},i=0,n=e.length;n>i;i++){var o=e[i];o[r]&&(t[o[r]]=i)}return t}return!1},flour.error=function(e){console.error("flour: "+e)},flour.validateFormData=function(e){var r={},t={},i=!1,n=e.find("input, textarea, select");return $.each(n,function(e,n){$input=$(n);var o=$input.attr("name");if("select-multiple"===$input[0].type){var l=[],u=$input.find("option");$.each(u,function(e,r){var t=$(r);t.data("selected")&&l.push(t.attr("value"))}),r[o]=l}else if("checkbox"===$input[0].type){var l=$input[0].checked?!0:!1;r[o]=l}else if("radio"===$input[0].type){if($input[0].checked){var l=$input.val();r[o]=l}}else{var l=$input.val();r[o]=l}$input.hasClass("validate")&&("select-multiple"===$input[0].type?0===l.length&&(t[o]="empty",i=!0):(""===l||l===!1)&&(t[o]="empty",i=!0)),$input.hasClass("validate-email")&&(flour.test.email(l)||(t[o]="invalid",i=!0))}),{data:r,errors:i?t:!1}};var flour=flour||{};flour.test={email:function(e){var r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.test(e)}};var flour=flour||{};flour.views={},flour.addView=function(e,r){r.prototype=new flour.baseView,flour.views[e]=r},flour.getView=function(e,r,t){var i=new flour.views[e];return i.eventListeners={},i.subscriptions=[],i.model={},i.views=[],i.el=null,i.id=flour.instanceId,flour.instanceId++,flour.publish("flour:view_create",{name:e,view:i}),i.initialize(r,t),i},flour.baseView=function(){var e=this;e.initialize=function(e,r){var t=this;t.events=t.events?t.events:{},t.el=$('<div class="flour-view"></div>'),t.addHelpers(),t.addEvents(),flour.bindView(t),t.init(e,r)},e.addEvents=function(){var e=this;if(void 0!==e.events)for(var r in e.events)!function(){var t=e.events[r],i=r.split(" "),n=i.pop(),o=i.join(" ");void 0!==e[t]?e.el.on(o,n,function(r){var i=$(r.currentTarget);e[t](r,i)}):flour.isFunction(t)&&e.el.on(o,n,function(e){var r=$(e.currentTarget);t(e,r)})}()},e.addHelpers=function(){var e=this;if(void 0!==e.helpers)for(var r=0,t=e.helpers.length;t>r;r++){var i=e.helpers[r];e[i]=flour.getHelper(i),void 0!==e[i].init&&e[i].init(e)}},e.find=function(e){var r=this;return r.el.find(e)},e.render=function(){var e=this;e.adoptTemplate(),e.trigger("render"),void 0!==e.postRender&&e.postRender()},e.adoptTemplate=function(){for(var e=this,r=0,t=e.views.length;t>r;r++)e.views[r].el.detach();var i=flour.getTemplate(e.template);e.el.html(i(e.model))},e.get=function(e){var r=this;return void 0===e?r.model:flour.getObjectKeyValue(r.model,e)},e.set=function(e,r,t){var i,n=this;if(flour.isObject(e))for(var o in e)n.model[o]=e[o];else{var l=flour.getObjectKeyValue(n.model,e);r!==l||flour.isArray(r)||flour.isObject(r)?i=flour.setObjectKeyValue(n.model,e,r):t=!1}if(t!==!1&&n.render(),i)for(var u=i.length,s=0;u>s;s++){var a=i.join(".");n.trigger("model."+a+":change",n.get(a)),i.pop()}},e.on=function(e,r){var t=this;void 0===t.eventListeners[e]&&(t.eventListeners[e]=[]),t.eventListeners[e].push(r)},e.off=function(e,r){var t=this,i=t.eventListeners[e];if(void 0!==i)if(void 0!==r){for(var n=0,o=i.length;o>n;n++)if(r===i[n]){i[n]=null;break}}else i.length=0},e.trigger=function(e,r){var t=this,i=t.eventListeners[e];if(void 0!==i&&null!==i)for(var n=0,o=i.length;o>n;n++){var l=i[n];null!==l&&void 0!==l&&l(r)}},e.subscribe=function(e,r){{var t=this;flour.subscribe(e,r)}t.subscriptions.push({eventName:e,callback:r})},e.getView=function(e,r,t){var i=this,n=flour.getView(e,r,t);return i.views.push(n),n},e.getList=function(e,r){var t=this,i=flour.getList(e,r);return t.views.push(i),i},e.destroy=function(){var e=this;e.trigger("destroy"),e.el.off();for(var r=0,t=e.subscriptions.length;t>r;r++){var i=e.subscriptions[r];flour.unsubscribe(i.eventName,i.callback)}for(var r=0,t=e.views.length;t>r;r++){var n=e.views[r];n.destroy()}for(var o in e.eventListeners)e.eventListeners[o]=null;void 0!==e.postDestroy&&e.postDestroy(),flour.publish("flour:view_destroy",e.id)}};